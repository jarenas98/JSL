<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- BOOTSTRAP css  -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Dashboard</title>
    <style>
        :root {
            --color-primary: #004D40;
            --color-secondary: #26A69A;
            --color-tertiary: #80CBC4;
            --color-white: floralwhite;
            --color-primary-text: #212121;
            --color-secondary-text: #757575;
        }
    </style>



</head>

<body>
    <!-- Barra de navegación -->
    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="#">JSL Software</a>
        <ul class="navbar-nav px-3">
            <li class="nav-item text-nowrap">
                <a class="nav-link" href="#">Reload</a>
            </li>
        </ul>
    </nav>

    <!-- Dashboard y section2 -->

    <main role="main" style="width:100%; padding-left:5%; padding-right: 5%;">
        <!-- Titulo principal -->
        <div id="tituloPrincipal"
            class="d-flex justify-content-center flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">

        </div>
        <!-- Titulo 2 -->
        <div class="d-flex  flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3">
            <h2>Información General</h2>
        </div>

        <!-- Informacion General -->

        <div class="container justify-content-center text-center">
            <div class="row">
                <div class="col-sm">

                    <div class="card">
                        <div class="card-header">
                            <h2 class="h2">IP</h2>
                        </div>
                        <div id="campoIp" class="card-body"></div>
                    </div>


                </div>
                <div class="col-sm">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h2">MAC</h2>
                        </div>
                        <div id="campoMAC" class="card-body"></div>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="col-sm">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="h2">RAM TOTAL</h2>
                            </div>
                            <div id="ramTotal" class="card-body"></div>
                        </div>
                    </div>
                </div>


            </div>
            <br />
            <div class="row">
                <div class="col-sm"></div>
                <div class="col-sm">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h2">SWAP TOTAL</h2>
                        </div>
                        <div id="swapTotal" class="card-body"></div>
                    </div>
                </div>
                <div class="col-sm"></div>
            </div>
            <br />
            <div class="row">

                <div class="col-sm">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h2">CPU</h2>
                        </div>
                        <div id="cpu" class="card-body">
                            <div class="row">
                                <div class="col-sm">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="h3"># Nucleos</h2>
                                        </div>
                                        <div id="corestotales" class="card-body"></div>
                                    </div>
                                </div>
                                <div class="col-sm">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="h3">Frecuencia Total</h2>
                                        </div>
                                        <div id="frecTotal" class="card-body"></div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-sm">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h2">Almacenamiento</h2>
                        </div>
                        <div class="card-body">
                            
                                <div class="col-sm">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="h3">Particiones</h2>
                                        </div>
                                        <div class="card-body">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">#</th>
                                                        <th scope="col">Nombre</th>
                                                        <th scope="col">Total</th>
                                                     </tr>
                                                </thead>
                                                <!-- Datos de las particiones -->
                                                <tbody id="bodyTablaParticiones"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <br/>
                                <div class="col-sm">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="h3">Grafica</h2>
                                        </div>
                                        <div class="card-body">
                                            <div  style="width: 100%; height: 100%; overflow: hidden; " class=" align-items-center">
                                                <div id="donutchart" ></div>
                                            </div>
                                           
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                </div>

            </div>

            <br />
            <div class="row ">
                <div class="col-sm">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h2">Usuarios Creados</h2>
                        </div>
                        <div class="card-body">
                            <table class="table">
                                <thead>
                                    <tr>

                                        <th scope="col">ID</th>
                                        <th scope="col">Nombre</th>
                                        <th scope="col">NombreCompleto</th>
                                        <th scope="col">NoHab</th>
                                        <th scope="col">telefono Oficina</th>
                                        <th scope="col">telefono Casa</th>
                                    </tr>
                                </thead>
                                <!-- Datos de los usuarios reales -->
                                <tbody id="bodyTablaUsuariosCreados"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Seccion de detalle -->
        <br />
        <div class="d-flex  flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-top">
            <h1 class="h2">Información Detallada</h1>
        </div>

    </main>


    <!-- Script para graficas -->

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
         google.charts.load("current", {packages:["corechart"]});
        


        var datos = {
            'nombreEquipo': 'jefferson-VirtualBox',
            'usuariosReales': { '1000': { 'nombre': 'jefferson', 'nombreCompleto': 'Jefferson', 'noHab': '3', 'telOficina': '4', 'telCasa': '888' } },
            'todosLosUsuarios': { '0': { 'nombre': 'root', 'nombreCompleto': 'root' }, '1': { 'nombre': 'daemon', 'nombreCompleto': 'daemon' }, '2': { 'nombre': 'bin', 'nombreCompleto': 'bin' }, '3': { 'nombre': 'sys', 'nombreCompleto': 'sys' }, '4': { 'nombre': 'sync', 'nombreCompleto': 'sync' }, '5': { 'nombre': 'games', 'nombreCompleto': 'games' }, '6': { 'nombre': 'man', 'nombreCompleto': 'man' }, '7': { 'nombre': 'lp', 'nombreCompleto': 'lp' }, '8': { 'nombre': 'mail', 'nombreCompleto': 'mail' }, '9': { 'nombre': 'news', 'nombreCompleto': 'news' }, '10': { 'nombre': 'uucp', 'nombreCompleto': 'uucp' }, '13': { 'nombre': 'proxy', 'nombreCompleto': 'proxy' }, '33': { 'nombre': 'www-data', 'nombreCompleto': 'www-data' }, '34': { 'nombre': 'backup', 'nombreCompleto': 'backup' }, '38': { 'nombre': 'list', 'nombreCompleto': 'Mailing List Manager' }, '39': { 'nombre': 'irc', 'nombreCompleto': 'ircd' }, '41': { 'nombre': 'gnats', 'nombreCompleto': 'Gnats Bug-Reporting System (admin)' }, '65534': { 'nombre': 'nobody', 'nombreCompleto': 'nobody' }, '100': { 'nombre': 'systemd-network', 'nombreCompleto': 'systemd Network Management', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '101': { 'nombre': 'systemd-resolve', 'nombreCompleto': 'systemd Resolver', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '102': { 'nombre': 'syslog', 'nombreCompleto': '' }, '103': { 'nombre': 'messagebus', 'nombreCompleto': '' }, '104': { 'nombre': '_apt', 'nombreCompleto': '' }, '105': { 'nombre': 'uuidd', 'nombreCompleto': '' }, '106': { 'nombre': 'cups-pk-helper', 'nombreCompleto': 'user for cups-pk-helper service', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '107': { 'nombre': 'kernoops', 'nombreCompleto': 'Kernel Oops Tracking Daemon', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '108': { 'nombre': 'rtkit', 'nombreCompleto': 'RealtimeKit', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '109': { 'nombre': 'avahi-autoipd', 'nombreCompleto': 'Avahi autoip daemon', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '110': { 'nombre': 'usbmux', 'nombreCompleto': 'usbmux daemon', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '111': { 'nombre': 'systemd-coredump', 'nombreCompleto': 'systemd core dump processing', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '112': { 'nombre': 'lightdm', 'nombreCompleto': 'Light Display Manager' }, '113': { 'nombre': 'dnsmasq', 'nombreCompleto': 'dnsmasq', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '114': { 'nombre': 'saned', 'nombreCompleto': '' }, '115': { 'nombre': 'nm-openvpn', 'nombreCompleto': 'NetworkManager OpenVPN', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '116': { 'nombre': 'avahi', 'nombreCompleto': 'Avahi mDNS daemon', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '117': { 'nombre': 'colord', 'nombreCompleto': 'colord colour management daemon', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '118': { 'nombre': 'speech-dispatcher', 'nombreCompleto': 'Speech Dispatcher', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '119': { 'nombre': 'pulse', 'nombreCompleto': 'PulseAudio daemon', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '120': { 'nombre': 'hplip', 'nombreCompleto': 'HPLIP system user', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '121': { 'nombre': 'geoclue', 'nombreCompleto': '' }, '1000': { 'nombre': 'jefferson', 'nombreCompleto': 'Jefferson', 'noHab': '', 'telOficina': '', 'telCasa': '' }, '999': { 'nombre': 'vboxadd', 'nombreCompleto': '' }, '1001': { 'nombre': 'camilo', 'nombreCompleto': '' }, '1002': { 'nombre': 'jazmin', 'nombreCompleto': '' }, '1003': { 'nombre': 'lucrecia', 'nombreCompleto': '' } },
            'cantidadUsuariosReales': 1,
            'cantidadTotalUsuarios': 45,
            'ipEquipo': '10.0.2.15',
            'mac': '08:00:27:8a:a4:b3',
            'totalRAM': 1989,
            'totalSwap': 969,
            'discos': { '/dev/sda1': 20029,'/dev/sda2': 20059,'/dev/sda3': 20059 },
            'cpuCores': 1,
            'cpuFrec': 1796.631,
            'topProcesos': { '1533': { 'usuarioPropietario': 'jeffers+', 'Nombre del proceso': 'cinnamon', 'Porcentaje de uso de CPU': '5.3', 'Tiempo de ejecución': '0:13' }, '1846': { 'usuarioPropietario': 'jeffers+', 'Nombre del proceso': '/usr/lib/gnome-terminal/gnome-terminal-server', 'Porcentaje de uso de CPU': '3.0', 'Tiempo de ejecución': '0:00' }, '1': { 'usuarioPropietario': 'root', 'Nombre del proceso': '/sbin/init', 'Porcentaje de uso de CPU': '0.8', 'Tiempo de ejecución': '0:02' }, '1176': { 'usuarioPropietario': 'root', 'Nombre del proceso': '/usr/lib/xorg/Xorg', 'Porcentaje de uso de CPU': '0.6', 'Tiempo de ejecución': '0:01' }, '1555': { 'usuarioPropietario': 'jeffers+', 'Nombre del proceso': 'nemo-desktop', 'Porcentaje de uso de CPU': '0.6', 'Tiempo de ejecución': '0:01' } },
            'usoDeCPU': -75.6,
            'usoDeRAM': 0.29212069062572876,
            'usoDeSWAP': 0.0,
            'usoDeDisco': { '/dev/sda1': 40 }
        }


        // Metodo que se encarga de ejecutar los diferentes metodos
        function main() {
            // cambiar el titrulo del documento
            document.getElementById('tituloPrincipal').innerHTML = `<h1 class="h1">Maquina: ${this.datos.nombreEquipo}</h1>`;
            // cambiar el contedido del IP
            document.getElementById('campoIp').innerHTML = `<h3 class="h3">${this.datos.ipEquipo}</h3>`;
            // cambiar el contedido del MAC
            document.getElementById('campoMAC').innerHTML = `<h3 class="h3">${this.datos.mac}</h3>`;
            // cambiar el contedido del RAM TOTAL
            document.getElementById('ramTotal').innerHTML = `<h3 class="h3">${this.datos.totalRAM} MB</h3>`;
            // cambiar el contedido del SWAP TOTAL
            document.getElementById('swapTotal').innerHTML = `<h3 class="h3">${this.datos.totalSwap} MB</h3>`;
            // cambiar el contedido del CPU cores
            document.getElementById('corestotales').innerHTML = `<h3 class="h4">${this.datos.cpuCores}</h3>`;
            // cambiar el contedido del CPU Frec
            document.getElementById('frecTotal').innerHTML = `<h3 class="h4">${this.datos.cpuFrec} MHz</h3>`;
            // llenar tabla de particiones
            this.insertDataParticiones();
            // llena tabla de usuarios creados
            this.insertarDataUsuariosCreados();

            



        }
        // variable que almacenara la data para las particiones de la tabla 1
        var datatablePart1 = [["Partición","MB"]];
        // Variable que almacenara el total de almacenamiento en MB
        var totalAlmacenamiento = 0;
        // permite pintar las particiones en la tabla de particiones
        function insertDataParticiones () {

            let res = "";
            let contador = 1;
            
            // Obteniendo todas las particiones de datos
            for (var particion in this.datos.discos) {
                 res = res + `<tr><th scope="row">${contador}</th><td>${particion}</td> <td>${this.datos.discos[particion]} MB</td></tr>`;
                 totalAlmacenamiento = totalAlmacenamiento+this.datos.discos[particion];
                 datatablePart1.push([particion, this.datos.discos[particion]]);
                 contador ++;
            }
           
            document.getElementById('bodyTablaParticiones').innerHTML = `${res}`;
        }
        // permite renderizar la grafica de las particiones
        function renderGrafParticiones (){
            var data = google.visualization.arrayToDataTable(this.datatablePart1,false);

      
            var options = {
                title: "Total = "+`${this.totalAlmacenamiento}`+" MB",
                pieHole: 0.4,
            };

            var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
            chart.draw(data, options);
        }
        // Obteniendo todas los usuarios creados y los pinta
        function insertarDataUsuariosCreados () {
            let res ="";

            for (var usuario in this.datos.usuariosReales) {
                                    
             
                    console.log(usuario['nombre'])
                   res = res +`
                <tr>
                    <th scope="row">${usuario}</th>
                    <td>${this.datos.usuariosReales[usuario].nombre}</td>
                    <td>${this.datos.usuariosReales[usuario].nombreCompleto}</td>
                    <td>${this.datos.usuariosReales[usuario].noHab}</td>
                    <td>${this.datos.usuariosReales[usuario].telOficina}</td>
                    <td>${this.datos.usuariosReales[usuario].telCasa}</td>
                </tr>`;


                }
            
            document.getElementById('bodyTablaUsuariosCreados').innerHTML = `${res}`;
        }

   

        this.main();
        google.charts.setOnLoadCallback(renderGrafParticiones);
    </script>




    <!-- BOOTSTRAP Scrips -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>


</body>

</html>